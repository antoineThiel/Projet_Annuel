{% extends 'base_front.html.twig' %}
{% block content %}
<div class="ml-5 mr-5">
    <div class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    {% block title %}{% endblock %}
                </div><!-- /.col -->
                <!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- Main content -->
    <section>
        <h1>{{ franchisee.lastName }} {{ franchisee.firstName }}</h1>
        <div class="row">
            <div class="col-sm-3">
                <div class="card card-primary card-outline">
                    <div class="card-header">
                        <strong>You <3</strong>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-6">
                                <p>{{ franchisee.mail }}</p>
                                <p>{{ franchisee.phone }}</p>
                            </div>
                            <div class="col-sm-6">
                                <p>{{ franchisee.license }}</p>
                                <p>{{ franchisee.address }} {{ franchisee.city }} {{ franchisee.postalCode }}</p>
                            </div>
                        </div>
                        <p><a href="{{ path('franchisee_edit', { id: franchisee.id } ) }}">Change some stuff (Si ils ont le droit)</a></p>
                    </div>
                </div>
            </div>
            <div class="col-sm-2">
                <div class="card card-primary card-outline">
                    <div class="card-header">
                        <strong>Your lasts orders</strong>
                    </div>
                    <div class="card-body">
                        <p>Your last 10 orders : </p>
                       {# TODO: get last invoices of the franchisee #}
                    </div>
                </div>
            </div>
            <div class="col-sm-2">
                <div class="card card-primary card-outline">
                    <div class="card-header">
                        <strong>Need more stuff ?</strong>
                    </div>
                    <div class="card-body">
                        <p><a href="{{ path('order_new_warehouse') }}">Place an order</a></p>
                        {# TODO: link the page to create an order #}
                    </div>
                </div>
            </div>
            <div class="col-sm-2">
                <div class="card card-primary card-outline">
                    <div class="card-header">
                        <strong>Want to tell us something ?</strong>
                    </div>
                    <div class="card-body">
                        <p><a href="#">Problem with your truck ?</a></p>
                        {# TODO: link the page to fill a truck complaint form #}
                        <p><a href="{{ path('truck_position_new') }}">Give us your new position</a></p>
                        <p><a href="{{ path('invoice_new') }}">Tell us about your month</a></p>
                        {# TODO: link the page to fill a number declaration #}
                        <p><a href="{{ path('franchisee_complaint_new') }}">Tell us anything else</a></p>
                        {# TODO: link the page to fill a form #}
                    </div>
                </div>
            </div>
            {% if franchisee.franchiseeComplaints is not null %}
                <div class="col-sm-2">
                    <div class="card card-outline card-primary">
                        <div class="card-header">
                            <strong>What you asked us</strong>
                        </div>
                        <div class="card-body">
                            {% for complaint in franchisee.franchiseeComplaints %}
                                <p>
                                    {{ complaint.title }}
                                    {% if complaint.isNew %}
                                        <button class="btn btn-success disabled">New</button>
                                    {% endif %}
                                    {% if complaint.isOngoing %}
                                        <button class="btn btn-info disabled">On going</button>
                                    {% endif %}
                                    {% if complaint.isClosed %}
                                        <button class="btn btn-danger disabled">Closed</button>
                                    {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
        {% if franchisee.truck is not null %}
            <div class="row">
                <div class="col-sm-3">
                    <div class="card card-outline card-primary">
                        <div class="card-header">
                            <strong>Your truck</strong>
                        </div>
                        <div class="card-body">
                            <p>Truck number : {{ franchisee.truck.registration }}</p>
                            <p>Actual Position : {{ posAddress }} {{ posCity }}</p>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    </section>
</div>
{% endblock %}
